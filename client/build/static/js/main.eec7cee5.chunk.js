(this.webpackJsonpyubbefrontend=this.webpackJsonpyubbefrontend||[]).push([[0],{43:function(e,t,a){},45:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(1),c=a.n(n),r=a(37),i=a.n(r),o=(a(43),a(2)),l=a.n(o),u=a(4),d=a(6),j=a(7),h=a(9),b=a(8),p=(a(45),a(73)),m=a(11),O=a.n(m);function f(e){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()({url:"https://yubbe-server.herokuapp.com/api/session",method:"get",headers:{"Access-Control-Allow-Origin":"*",authToken:t.authToken}}).then((function(e){return e})).catch((function(e){return{message:e.toString()}}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],g=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).listCalls=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()({url:"https://yubbe-server.herokuapp.com/api/calls",method:"get",headers:{"Access-Control-Allow-Origin":"*",authToken:t.authToken}}).then((function(e){return{data:e.data,status:e.status}})).catch((function(e){return{msg:e,status:401}}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.listUserCalls=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()({url:"https://yubbe-server.herokuapp.com/api/calls/mycalls",method:"get",headers:{"Access-Control-Allow-Origin":"*",authToken:t.authToken}}).then((function(e){return{data:e.data,status:e.status}})).catch((function(e){return{msg:e,status:401}}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.componentDidMount=Object(u.a)(l.a.mark((function e(){var t,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.cookies,e.next=3,n.listUserCalls(t.cookies);case 3:return a=e.sent,e.next=6,n.listCalls(t.cookies);case 6:(s=e.sent).data&&n.setState({calls:s.data}),a.data&&n.setState({myCalls:a.data});case 9:case"end":return e.stop()}}),e)}))),n.joinCall=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()({url:"https://yubbe-server.herokuapp.com/api/call/join",method:"post",headers:{"Access-Control-Allow-Origin":"*",authToken:n.props.cookies.cookies.authToken},data:{callId:t.target.id}}).then((function(e){return{data:e.data,status:e.status}})).catch((function(e){return 429===e.response.status?alert("Voc\xea atingiu o seu limite semanal."):429===e.response.status&&alert("Desculpa, mas a Call j\xe1 est\xe1 lotada."),{msg:e}}));case 2:return a=n.props.cookies,e.next=5,n.listUserCalls(a.cookies);case 5:return s=e.sent,e.next=8,n.listCalls(a.cookies);case 8:(c=e.sent).data&&n.setState({calls:c.data}),s.data&&n.setState({myCalls:s.data});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.moderateCall=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()({url:"https://yubbe-server.herokuapp.com/api/call/moderate",method:"post",headers:{"Access-Control-Allow-Origin":"*",authToken:n.props.cookies.cookies.authToken},data:{callId:t.target.id}}).then((function(e){return{data:e.data,status:e.status}})).catch((function(e){return{msg:e}}));case 2:return a=n.props.cookies,e.next=5,n.listUserCalls(a.cookies);case 5:return s=e.sent,e.next=8,n.listCalls(a.cookies);case 8:(c=e.sent).data&&n.setState({calls:c.data}),s.data&&n.setState({myCalls:s.data});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.specialAuthStyle=function(){return"adm"===n.props.auth||"moderator"===n.props.auth?{display:"flex"}:{display:"none"}},n.myCallsRender=function(e){var t=[];return e.client&&e.client.forEach((function(e,a){var n=new Date(e.date);t.push(Object(s.jsx)("div",{className:"call-card",children:Object(s.jsx)("div",{className:"card-content",children:Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{className:"call-theme",children:e.theme}),[],Object(s.jsxs)("p",{className:"call-occupation",children:[Object(s.jsx)("b",{children:"Ocupa\xe7\xe3o:"})," ",e.clients.length]}),Object(s.jsxs)("p",{className:"call-date",children:["Data: ",n.getDate()," ",v[n.getMonth()]," ",n.getFullYear()," \xe0s ",n.getHours(),"h"]})]})})},a))})),e.moderator&&e.moderator.forEach((function(e,a){var n=new Date(e.date);t.push(Object(s.jsx)("div",{className:"call-card",style:{borderColor:"red"},children:Object(s.jsx)("div",{className:"card-content",children:Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"moderator-signal-ball"}),Object(s.jsx)("p",{className:"call-theme",children:e.theme}),Object(s.jsxs)("p",{className:"call-occupation",children:[Object(s.jsx)("b",{children:"Ocupa\xe7\xe3o:"})," ",e.clients.length]}),Object(s.jsxs)("p",{className:"call-date",children:["Data: ",n.getDate()," ",v[n.getMonth()]," ",n.getFullYear()," \xe0s ",n.getHours(),"h"]})]})})},"M"+a))})),t},n.availableCallsRender=function(e){var t=[];return e&&e.forEach((function(e,a){var c=[];e.moderator[0]&&(c=Object(s.jsxs)("p",{className:"call-occupation",children:[Object(s.jsx)("b",{children:"Moderador:"})," ",e.moderator[0].name]}));var r=new Date(e.date);t.push(Object(s.jsx)("div",{className:"call-card",children:Object(s.jsxs)("div",{className:"card-content",children:[Object(s.jsxs)("div",{className:"card-description",children:[Object(s.jsx)("p",{className:"call-theme",children:e.theme}),c,Object(s.jsxs)("p",{className:"call-occupation",children:[Object(s.jsx)("b",{children:"Ocupa\xe7\xe3o:"})," ",e.clients.length]}),Object(s.jsxs)("p",{className:"call-date",children:["Data: ",r.getDate()," ",v[r.getMonth()]," ",r.getFullYear()," \xe0s ",r.getHours(),"h"]})]}),Object(s.jsxs)("div",{className:"card-buttons",children:[Object(s.jsx)("button",{className:"moderate",id:e._id,onClick:n.moderateCall,style:n.specialAuthStyle(),children:"Moderate"}),Object(s.jsx)("button",{className:"join-call",id:e._id,onClick:n.joinCall,children:"Join call"})]})]})},a))})),t},n.state={calls:[],myCalls:[]},n}return Object(j.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"calls",children:[Object(s.jsx)("h2",{children:"Minhas Calls"}),Object(s.jsx)("div",{className:"calls-list",children:this.myCallsRender(this.state.myCalls)}),Object(s.jsx)("h2",{children:"Calls dispon\xedveis"}),Object(s.jsx)("div",{className:"calls-list",children:this.availableCallsRender(this.state.calls)})]})}}]),a}(c.a.Component),k=Object(p.a)(g),y=a(3),C=a.p+"static/media/logo.c2be5341.svg",w=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).logoutFunc=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.cookies.set("authToken","",{path:"/"}),n.setState({session:!1});case 3:case"end":return e.stop()}}),e)}))),n.componentDidMount=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.cookies,e.next=3,f(t.cookies);case 3:(a=e.sent).data&&a.data.approved?(n.state.session||n.setState({session:!0}),a.data.name&&n.setState({name:a.data.name}),a.data.authorization&&n.setState({auth:a.data.authorization})):n.state.session&&n.setState({session:!1});case 5:case"end":return e.stop()}}),e)}))),n.redirect=function(){return n.state.session?[]:Object(s.jsx)(y.a,{to:"/login"})};var c=e.cookies,r=!1;return c.get("authToken")&&""!==c.get("authToken")&&(r=!0),n.state={session:r,name:c.get("name")||"",auth:"client"},n}return Object(j.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"container",children:[this.redirect(),Object(s.jsxs)("main",{className:"main",children:[Object(s.jsxs)("header",{className:"header",children:[Object(s.jsxs)("h1",{children:["Welcome, ",this.state.name,"!"]}),"  ",Object(s.jsx)("button",{onClick:this.logoutFunc,className:"logoutbutton",children:"Logout"})]}),Object(s.jsx)(k,{auth:this.state.auth,username:this.state.name})]}),Object(s.jsxs)("footer",{className:"footer",children:[Object(s.jsx)("p",{children:"Powered by:"}),Object(s.jsx)("img",{src:C,alt:"Yubbe Logo",className:"logo"})]})]})}}]),a}(c.a.Component),N=Object(p.a)(w),S=(a(69),a(20));var D=function(e){var t=Object(n.useState)(),a=Object(S.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(),o=Object(S.a)(i,2),d=o[0],j=o[1],h=Object(n.useState)(),b=Object(S.a)(h,2),p=b[0],m=b[1],f=Object(n.useState)(),x=Object(S.a)(f,2),v=x[0],g=x[1],k=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O()({url:"https://yubbe-server.herokuapp.com/api/signup",method:"post",data:{name:d,email:c,password:p}}).then((function(e){g("Conta criada com sucesso"),r(""),j(""),m("")})).catch((function(e){409===e.response.status&&g("Email j\xe1 cadastrado")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("form",{className:"signup-form",children:[Object(s.jsx)("p",{children:v}),Object(s.jsxs)("label",{children:[Object(s.jsx)("span",{children:"Nome:"}),Object(s.jsx)("input",{type:"text",name:"name",value:d,onChange:function(e){j(e.target.value)}})]}),Object(s.jsxs)("label",{children:[Object(s.jsx)("span",{children:"Email:"}),Object(s.jsx)("input",{type:"email",name:"email",value:c,onChange:function(e){r(e.target.value),g("")}})]}),Object(s.jsxs)("label",{children:[Object(s.jsx)("span",{children:"Senha:"}),Object(s.jsx)("input",{type:"password",name:"password",value:p,onChange:function(e){m(e.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",onClick:k,children:"Enviar"})})]})},A=a(74),M=a(15),T=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("main",{className:"main-signup",children:Object(s.jsx)(A.a,{children:Object(s.jsx)(D,{styleclass:"loginform"})})}),Object(s.jsxs)("footer",{className:"footer",children:[Object(s.jsx)("p",{children:"Powered by:"}),Object(s.jsx)(M.b,{to:"/",children:Object(s.jsx)("img",{src:C,alt:"Yubbe Logo",className:"logo"})})]})]})}}]),a}(c.a.Component),E=(a(70),function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.cookies.cookies,e.next=3,f(t);case 3:a=e.sent,console.log(a.data),a.data&&a.data.approved?n.setState({session:!0}):n.state.session&&n.setState({session:!1});case 6:case"end":return e.stop()}}),e)}))),n.submitForm=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O()({url:"https://yubbe-server.herokuapp.com/api/login",method:"post",data:{email:n.state.email,password:n.state.password},headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){n.props.cookies.set("authToken",String(e.data.authToken),{path:"/"}),e.data.approved?n.setState({session:!0,invalidData:!1}):n.setState({session:!1,invalidData:!0})})).catch((function(e){n.setState({invalidData:!0})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.redirect=function(){return n.state.session?Object(s.jsx)(y.a,{to:"/"}):[]},n.invalidMessage=function(){if(n.state.invalidData)return Object(s.jsx)("p",{children:"Email ou senha n\xe3o encontrados"})},n.state={session:!1,email:"",password:"",invalidData:!1},n}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsxs)("form",{className:"login-form",children:[this.redirect(),Object(s.jsxs)("label",{children:[Object(s.jsx)("span",{children:"Email:"}),Object(s.jsx)("input",{type:"email",name:"email",value:this.state.email,onChange:function(t){e.setState({email:t.target.value,invalidData:!1})}})]}),Object(s.jsxs)("label",{children:[Object(s.jsx)("span",{children:"Senha:"}),Object(s.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value,invalidData:!1})}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",onClick:this.submitForm,children:"Enviar"})}),this.invalidMessage()]})}}]),a}(c.a.Component)),F=Object(p.a)(E),Y=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("main",{className:"main-login",children:Object(s.jsx)(F,{styleclass:"loginform"})}),Object(s.jsxs)("footer",{className:"footer",children:[Object(s.jsx)("p",{children:"Powered by:"}),Object(s.jsx)(M.b,{to:"/",children:Object(s.jsx)("img",{src:C,alt:"Yubbe Logo",className:"logo"})})]})]})}}]),a}(c.a.Component),J=(a(71),function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),n.submitForm=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=n.props.cookies,e.next=4,O()({url:"https://yubbe-server.herokuapp.com/api/calls",method:"post",data:{date:n.state.date,theme:n.state.theme},headers:{"Access-Control-Allow-Origin":"*",authToken:a.cookies.authToken}}).then((function(e){console.log(e),201===e.status?n.setState({created:!0,invalidData:!1}):n.setState({created:!1,invalidData:!0})})).catch((function(e){alert("Acesso n\xe3o autorizado, apenas administradores podem criar chamadas. Por favor, fa\xe7a o seu login novamente"),n.setState({created:!1,invalidData:!1})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.invalidMessage=function(){if(n.state.invalidData)return Object(s.jsx)("p",{children:"date ou senha n\xe3o encontrados"})},n.createdMessage=function(){if(n.state.created)return Object(s.jsx)("p",{children:"A sua Call foi criada"})},n.state={created:!1,date:"",theme:"",invalidData:!1},n}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsxs)("form",{className:"login-form",children:[Object(s.jsxs)("label",{children:[Object(s.jsx)("span",{children:"Data:"}),Object(s.jsx)("input",{type:"datetime-local",name:"date",value:this.state.date,onChange:function(t){e.setState({date:t.target.value,invalidData:!1,created:!1})}})]}),Object(s.jsxs)("label",{children:[Object(s.jsx)("span",{children:"Tema:"}),Object(s.jsx)("input",{type:"text",name:"theme",value:this.state.theme,onChange:function(t){e.setState({theme:t.target.value,invalidData:!1,created:!1})}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",onClick:this.submitForm,children:"Enviar"})}),this.invalidMessage(),this.createdMessage()]})}}]),a}(c.a.Component)),L=Object(p.a)(J),P=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("main",{className:"main-create-call",children:Object(s.jsx)(A.a,{children:Object(s.jsx)(L,{styleclass:"loginform"})})}),Object(s.jsxs)("footer",{className:"footer",children:[Object(s.jsx)("p",{children:"Powered by:"}),Object(s.jsx)("img",{src:C,alt:"Yubbe Logo",className:"logo"})]})]})}}]),a}(c.a.Component);i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(M.a,{children:Object(s.jsxs)(y.d,{children:[Object(s.jsx)(y.b,{path:"/signup",children:Object(s.jsx)(A.a,{children:Object(s.jsx)(T,{})})}),Object(s.jsx)(y.b,{path:"/login",children:Object(s.jsx)(A.a,{children:Object(s.jsx)(Y,{})})}),Object(s.jsx)(y.b,{path:"/createcall",children:Object(s.jsx)(A.a,{children:Object(s.jsx)(P,{})})}),Object(s.jsx)(y.b,{path:"/",children:Object(s.jsx)(A.a,{children:Object(s.jsx)(N,{})})})]})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.eec7cee5.chunk.js.map